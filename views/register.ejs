<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Material Design Lite</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.teal-indigo.min.css">
    <style>
        body{
            background-color: whitesmoke;
        }
        .demo-card-event.mdl-card {
            width: 100%;
            min-width: 300px;
        }
        .portfolio-contact form {
            margin: auto;
        }
        .login-ribbon {
            width: 100%;
            height: 50vh;
            background-color: #009688;

        }

        .login-main {
            margin-top: -45vh;
        }
    </style>
</head>
<body>
<div class="login-layout mdl-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
    <div class="login-ribbon"></div>

    <main class="login-main mdl-layout__content">
        <!--问题：ipad模式占4行只有一半，解决：ipad向右偏移2。-->
        <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--4-col mdl-cell--12-phone mdl-cell--4-offset-desktop mdl-cell--2-offset-tablet mdl-grid" style="margin-bottom: 2px">
                <div class="mdl-cell mdl-cell--middle" style="margin: 0 auto;text-align: center;min-width: 300px">
                    <a href="/" style="text-decoration: none;"><h3 style="color: white;font-family: cursive">CHSH'S Blog</h3></a>
                </div>
            </div>
        </div>
        <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--4-col mdl-cell--12-phone mdl-cell--4-offset-desktop mdl-cell--2-offset-tablet mdl-grid ">
                <div class="mdl-card demo-card-event mdl-card mdl-shadow--2dp mdl-cell mdl-cell--middle mdl-grid--no-spacing">
                    <div class="mdl-card__title mdl-grid" style="margin: 0 auto;padding: 16px">
                        <i class="material-icons" style="font-size: 32px">person</i><p style="font-size: 32px">Sign Up</p>
                    </div>
                    <div class="mdl-card__actions mdl-card--border mdl-grid" style="padding: 16px">
                        <form action="/users/login">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell cdl-cell--12-col" style="width: 90%;margin: 10px">
                                <input class="mdl-textfield__input" pattern="[A-Z,a-z,0-9]{4,8}$" type="text" id="userid">
                                <label class="mdl-textfield__label" for="Name">UserID</label>
                                <span class="mdl-textfield__error">Letters and numbers only,4-8 long</span>
                            </div>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell cdl-cell--12-col" style="width: 90%;margin: 10px">
                                <input class="mdl-textfield__input" pattern="[A-Z,a-z,0-9]{3,20}$" type="text" id="userName">
                                <label class="mdl-textfield__label" for="Name">UserName</label>
                                <span class="mdl-textfield__error">Letters and numbers only,3-20 long</span>
                            </div>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell cdl-cell--12-col" style="width: 90%">
                                <input class="mdl-textfield__input" pattern="[A-Z,a-z,0-9]{4,15}$" type="password" id="pwd">
                                <label class="mdl-textfield__label" for="Email">PASSWORD</label>
                                <span class="mdl-textfield__error">Letters and numbers only,4-15 long</span>
                            </div>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell cdl-cell--12-col" style="width: 90%">
                                <input class="mdl-textfield__input" pattern="[A-Z,a-z,0-9]{4,15}$" type="password" id="pwdcfm">
                                <label class="mdl-textfield__label" for="Email">CONFIRM PASSWORD</label>
                                <span class="mdl-textfield__error">Letters and numbers only,4-15 long</span>
                            </div>

                        </form>
                        <div class="mdl-grid"style="width: 100%;">
                            <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-cell-middle" style="margin: 0 auto;width: 80%" id="signin">
                                SIGN UP
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </main>

</div>
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="/js/jquery-3.3.1.js"></script>
<script>
    $(document).ready(function () {
        $("#signin").click(function () {
            var userid = $("#userid").val();
            var pwd = $("#pwd").val();
            var userName = $("#userName").val();
            var pwdConfirm = $("#pwdcfm").val();
            if(pwd!==pwdConfirm){
                alert("Password not equal!");
                return;
            }
            if(pwd===""||userid===""||userName===""||pwdConfirm===""){
                alert("Cannot be empty!");
                return;
            }
            else if(userid.length>8||userid.length<4){
                alert("USERID Input ERROR!");
                return;
            }
            else if(userName.length>8||userName.length<4){
                alert("USENAME Input ERROR!");
                return;
            }
            else if(pwd.length>16||pwd.length<4){
                alert("Pwd Input ERROR!");
                return;
            }
            var data = {
                userid:userid,
                pwd:pwd,
                userName:userName,
            }
            $.ajax({
                data:data,
                type:"POST",
                url:"/users/reg",
                success:function (msg) {
                    if(msg==="That id has already been registered")
                        alert(msg);
                    else{
                        alert("Register Success");
                        window.location.href = "/users/loginPage";
                    }

                },
                error:function () {

                }
            })
        })
    })
</script>
</body>
</html>
