<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Material Design Lite</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="/images/ios-desktop.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="images/favicon.png">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.teal-indigo.min.css">
    <style>
        body{
            background-color: whitesmoke;
        }
        .demo-card-event.mdl-card {
            width: 100%;
            min-width: 300px;
            /*background: #3E4EB8;*/
        }
        .login-content{
            /*position: relative;*/
            /*min-width: 350px;*/
            /*min-height: 390px;*/
            /*max-height: 390px;*/
            /*max-width: 400px;*/
        }
        .portfolio-contact form {
            /*max-width: 550px;*/
            margin: auto;
        }
        .login-ribbon {
            width: 100%;
            height: 50vh;
            background-color: #009688;
            /*-webkit-flex-shrink: 0;*/
            /*-ms-flex-negative: 0;*/
            /*flex-shrink: 0;*/
        }

        .login-main {
            margin-top: -35vh;
            /*-webkit-flex-shrink: 0;*/
            /*-ms-flex-negative: 0;*/
            /*flex-shrink: 0;*/
        }
    </style>
</head>
<body>
<div class="login-layout mdl-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
    <div class="login-ribbon"></div>

    <main class="login-main mdl-layout__content">
        <!--问题：ipad模式占4行只有一半，解决：ipad向右偏移2。-->
        <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--4-col mdl-cell--12-phone mdl-cell--4-offset-desktop mdl-cell--2-offset-tablet mdl-grid" style="margin-bottom: 2px">
                <div class="mdl-cell mdl-cell--middle" style="margin: 0 auto;text-align: center;min-width: 300px">
                    <a href="/" style="text-decoration: none;"><h3 style="color: white;font-family: cursive">CHSH'S Blog</h3></a>
                </div>
            </div>
        </div>
        <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--4-col mdl-cell--12-phone mdl-cell--4-offset-desktop mdl-cell--2-offset-tablet mdl-grid ">
                <div class="mdl-card demo-card-event mdl-card mdl-shadow--2dp mdl-cell mdl-cell--middle mdl-grid--no-spacing">
                    <div class="mdl-card__title mdl-grid" style="margin: 0 auto;padding: 16px">
                        <i class="material-icons" style="font-size: 32px">person</i><p style="font-size: 32px">Sign In</p>
                    </div>
                    <div class="mdl-card__actions mdl-card--border mdl-grid" style="padding: 16px">
                        <form>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell cdl-cell--12-col" style="width: 90%;margin: 10px">
                                <input class="mdl-textfield__input" type="text" id="userid">
                                <label class="mdl-textfield__label" for="Name">UserID</label>
                                <span class="mdl-textfield__error">Letters and spaces only</span>
                            </div>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell cdl-cell--12-col" style="width: 90%">
                                <input class="mdl-textfield__input" type="password" id="pwd">
                                <label class="mdl-textfield__label" for="Email">PASSWORD</label>
                            </div>
                            <div class="mdl-grid">
                                <div class="mdl-cell mdl-cell--8-col"><a href="/users/registerPage" style="text-decoration: none;width: 100%">Register Now!</a></div>
                                <!--<div class="mdl-cell mdl-cell&#45;&#45;4-col"><a href="#" style="text-decoration: none;width: 100%">ForgetPassword?</a></div>-->
                            </div>

                        </form>
                        <div class="mdl-grid"style="width: 100%;">
                            <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-cell-middle" style="margin: 0 auto;width: 80%" id="signin">
                                SIGN IN
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </main>

</div>
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="/js/jquery-3.3.1.js"></script>
<script src="/js/jquerysession.js"></script>
<script>
    $(document).ready(function () {
        $("#signin").click(function () {
            var userid = $("#userid").val();
            var pwd = $("#pwd").val();
            var data = {
                userid:userid,
                pwd:pwd
            }
            $.ajax({
                data:data,
                type:"POST",
                url:"/users/login",
                success:function (msg) {
                    if(msg==="Wrong Password"||msg==="user not found"){
                        alert(msg);
                    }
                    else{
                        $.session.set('user',msg.userName);
                        $.session.set('role',msg.role);
                        window.location.href = "/";
                    }

                },
                error:function () {

                }
            })
        })
    })
</script>
</body>
</html>
